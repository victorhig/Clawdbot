<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />

    <title>今年進度條 · Year Progress</title>
    <meta name="description" content="今年已經過了多少？用清淡、現代化的進度條顯示今年第幾天與百分比，支援深色模式與原生分享。" />

    <!-- Canonical / SEO -->
    <link rel="canonical" href="https://victorhig.github.io/Clawdbot/" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Year Progress" />
    <meta property="og:title" content="今年進度條 · Year Progress" />
    <meta property="og:description" content="顯示今年已是第幾天、已經過了多少百分比。清淡配色、深色模式、原生分享。" />
    <meta property="og:url" content="https://victorhig.github.io/Clawdbot/" />
    <meta property="og:image" content="https://victorhig.github.io/Clawdbot/og.svg" />
    <meta property="og:image:alt" content="Year Progress — a calm progress bar showing year completion" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="今年進度條 · Year Progress" />
    <meta name="twitter:description" content="顯示今年第幾天與年度進度百分比。" />
    <meta name="twitter:image" content="https://victorhig.github.io/Clawdbot/og.svg" />

    <!-- PWA-ish -->
    <meta name="theme-color" content="#F5F6FA" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#0B0F17" media="(prefers-color-scheme: dark)" />
    <link rel="manifest" href="./manifest.webmanifest" />
    <link rel="icon" href="./icon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="./icon.svg" />

    <style>
      :root{
        --bg: #f6f7fb;
        --card: rgba(255,255,255,.72);
        --text: #101828;
        --muted: #475467;
        --border: rgba(16,24,40,.08);
        --shadow: 0 16px 50px rgba(16,24,40,.10);

        --track: rgba(16,24,40,.08);
        --fill1: #8fd3f4;
        --fill2: #c5b3ff;
        --fill3: #b7f7d8;

        --btn: rgba(16,24,40,.06);
        --btnHover: rgba(16,24,40,.09);
        --focus: rgba(84, 112, 255, .35);
      }

      @media (prefers-color-scheme: dark){
        :root{
          --bg: #070a10;
          --card: rgba(255,255,255,.06);
          --text: #e7ecf6;
          --muted: #a7b0c2;
          --border: rgba(231,236,246,.10);
          --shadow: 0 18px 60px rgba(0,0,0,.45);

          --track: rgba(231,236,246,.12);
          --fill1: #6ecbff;
          --fill2: #b7a3ff;
          --fill3: #7cf0c0;

          --btn: rgba(231,236,246,.08);
          --btnHover: rgba(231,236,246,.12);
          --focus: rgba(124, 240, 192, .28);
        }
      }

      *{ box-sizing: border-box; }
      html,body{ height:100%; }
      body{
        margin:0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
        background:
          radial-gradient(900px 520px at 20% 15%, rgba(143,211,244,.45), transparent 55%),
          radial-gradient(880px 520px at 85% 25%, rgba(197,179,255,.35), transparent 58%),
          radial-gradient(900px 560px at 55% 90%, rgba(183,247,216,.28), transparent 55%),
          var(--bg);
        color: var(--text);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        display:flex;
        align-items:center;
        justify-content:center;
        padding: 28px 18px;
      }

      .wrap{ width:min(920px, 100%); }

      header{
        display:flex;
        align-items:flex-start;
        justify-content:space-between;
        gap: 14px;
        margin-bottom: 14px;
      }

      .title{
        display:flex;
        flex-direction:column;
        gap: 6px;
      }

      h1{
        font-size: clamp(24px, 4vw, 34px);
        margin:0;
        letter-spacing: -0.02em;
      }

      .sub{
        margin:0;
        color: var(--muted);
        font-size: 14px;
      }

      .card{
        border: 1px solid var(--border);
        background: var(--card);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        border-radius: 22px;
        box-shadow: var(--shadow);
        padding: clamp(18px, 3vw, 28px);
      }

      .grid{
        display:grid;
        grid-template-columns: 1.2fr .8fr;
        gap: 18px;
        align-items:stretch;
      }

      @media (max-width: 820px){
        .grid{ grid-template-columns: 1fr; }
      }

      .big{
        display:flex;
        flex-direction:column;
        gap: 14px;
      }

      .statRow{
        display:flex;
        align-items:baseline;
        justify-content:space-between;
        gap: 10px;
        flex-wrap: wrap;
      }

      .percent{
        font-variant-numeric: tabular-nums;
        font-size: clamp(34px, 6.5vw, 58px);
        letter-spacing: -0.03em;
        line-height: 1.05;
      }

      .label{
        color: var(--muted);
        font-size: 13px;
      }

      .progress{
        height: 14px;
        border-radius: 999px;
        background: var(--track);
        overflow:hidden;
        border: 1px solid var(--border);
      }

      .fill{
        height: 100%;
        width: 0%;
        border-radius: 999px;
        background: linear-gradient(90deg, var(--fill1), var(--fill2), var(--fill3));
        box-shadow: 0 10px 25px rgba(143,211,244,.22);
        transition: width 1200ms cubic-bezier(.2,.9,.2,1);
        position:relative;
      }

      .fill::after{
        content:"";
        position:absolute;
        inset:0;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
        transform: translateX(-60%);
        animation: shine 2.8s ease-in-out infinite;
        opacity:.65;
      }

      @keyframes shine{
        0%{ transform: translateX(-70%); opacity:0; }
        30%{ opacity:.55; }
        60%{ opacity:.55; }
        100%{ transform: translateX(120%); opacity:0; }
      }

      @media (prefers-reduced-motion: reduce){
        .fill{ transition:none; }
        .fill::after{ display:none; }
      }

      .meta{
        display:grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
        margin-top: 12px;
      }

      .pill{
        padding: 12px 12px;
        border-radius: 14px;
        border: 1px solid var(--border);
        background: rgba(255,255,255,.05);
      }

      .pill .v{
        font-size: 18px;
        font-variant-numeric: tabular-nums;
        letter-spacing: -0.01em;
      }

      .pill .k{ color: var(--muted); font-size: 12px; margin-top: 4px; }

      .side{
        display:flex;
        flex-direction:column;
        justify-content:space-between;
        gap: 14px;
      }

      .btns{
        display:flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content:flex-end;
      }

      button{
        appearance:none;
        border: 1px solid var(--border);
        background: var(--btn);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 12px;
        font-size: 13px;
        cursor:pointer;
        transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
        display:inline-flex;
        gap: 8px;
        align-items:center;
      }

      button:hover{ background: var(--btnHover); transform: translateY(-1px); }
      button:active{ transform: translateY(0px); }
      button:focus{ outline:none; box-shadow: 0 0 0 4px var(--focus); }

      .toast{
        min-height: 20px;
        color: var(--muted);
        font-size: 12px;
      }

      footer{
        margin-top: 14px;
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap: 12px;
        color: var(--muted);
        font-size: 12px;
      }

      a{ color: inherit; }
      .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div class="title">
          <h1>今年進度條</h1>
          <p class="sub">淡色系、現代化設計 · 支援深色模式與原生分享</p>
        </div>
        <div class="btns" aria-label="Actions">
          <button id="shareBtn" type="button" title="Share">
            <span aria-hidden="true">↗</span><span>分享</span>
          </button>
          <button id="copyBtn" type="button" title="Copy link">
            <span aria-hidden="true">⧉</span><span>複製連結</span>
          </button>
        </div>
      </header>

      <section class="card">
        <div class="grid">
          <div class="big">
            <div class="statRow">
              <div>
                <div class="percent"><span id="pct">--.-</span>%</div>
                <div class="label">年度已完成</div>
              </div>
              <div style="text-align:right">
                <div class="percent" style="font-size: clamp(18px, 3.4vw, 28px); line-height:1.1">
                  第 <span id="day">--</span> 天
                </div>
                <div class="label">今年一共 <span id="days">--</span> 天</div>
              </div>
            </div>

            <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Year progress">
              <div class="fill" id="fill"></div>
            </div>

            <div class="meta">
              <div class="pill">
                <div class="v"><span id="date">----</span></div>
                <div class="k">今天日期</div>
              </div>
              <div class="pill">
                <div class="v"><span id="left">--</span></div>
                <div class="k">今年剩餘天數</div>
              </div>
            </div>
          </div>

          <aside class="side">
            <div class="pill" style="height:100%">
              <div class="v" style="font-size:14px">小提示</div>
              <div class="k" style="font-size:13px; margin-top:10px; line-height:1.6">
                這頁會用你裝置的本地時間計算「今年第幾天」。
                你也可以把它加到主畫面當作小工具頁面使用。
                <div style="margin-top:10px" class="mono" id="now"></div>
              </div>
            </div>
            <div class="toast" id="toast" aria-live="polite"></div>
          </aside>
        </div>
      </section>

      <footer>
        <div>Made for <span class="mono">victorhig/Clawdbot</span></div>
        <div><a href="https://github.com/victorhig/Clawdbot" target="_blank" rel="noreferrer">GitHub</a></div>
      </footer>
    </div>

    <script>
      const $ = (id) => document.getElementById(id);
      const toast = (msg) => {
        const el = $('toast');
        el.textContent = msg;
        clearTimeout(toast._t);
        toast._t = setTimeout(() => (el.textContent = ''), 2200);
      };

      const pad2 = (n) => String(n).padStart(2, '0');

      function isLeapYear(y){
        return (y % 4 === 0 && y % 100 !== 0) || (y % 400 === 0);
      }

      function dayOfYear(d){
        const start = new Date(d.getFullYear(), 0, 1);
        const diff = d - start;
        const oneDay = 24 * 60 * 60 * 1000;
        return Math.floor(diff / oneDay) + 1; // 1-based
      }

      function update(){
        const now = new Date();
        const y = now.getFullYear();
        const total = isLeapYear(y) ? 366 : 365;
        const doy = dayOfYear(now);
        const pct = (doy / total) * 100;

        $('pct').textContent = pct.toFixed(1);
        $('day').textContent = String(doy);
        $('days').textContent = String(total);
        $('left').textContent = String(total - doy);

        const yyyy = y;
        const mm = pad2(now.getMonth() + 1);
        const dd = pad2(now.getDate());
        $('date').textContent = `${yyyy}-${mm}-${dd}`;
        $('now').textContent = `Local time: ${yyyy}-${mm}-${dd} ${pad2(now.getHours())}:${pad2(now.getMinutes())}:${pad2(now.getSeconds())}`;

        // set progress bar
        const fill = $('fill');
        requestAnimationFrame(() => {
          fill.style.width = `${pct.toFixed(3)}%`;
          const pb = document.querySelector('[role="progressbar"]');
          pb.setAttribute('aria-valuenow', pct.toFixed(1));
        });

        // update dynamic share text
        window.__share = {
          title: '今年進度條 · Year Progress',
          text: `今年已經第 ${doy} 天（${pct.toFixed(1)}%）`,
          url: location.href
        };
      }

      async function copyLink(){
        try{
          await navigator.clipboard.writeText(location.href);
          toast('已複製連結');
        } catch {
          // fallback
          const ta = document.createElement('textarea');
          ta.value = location.href;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          ta.remove();
          toast('已複製連結');
        }
      }

      async function share(){
        const payload = window.__share || { title: document.title, url: location.href };
        if (navigator.share) {
          try{
            await navigator.share(payload);
          } catch {
            // user cancelled
          }
        } else {
          await copyLink();
          toast('此裝置不支援原生分享，已改為複製連結');
        }
      }

      $('copyBtn').addEventListener('click', copyLink);
      $('shareBtn').addEventListener('click', share);

      update();
      // refresh small clock; keep progress stable for the day
      setInterval(() => {
        const n = new Date();
        $('now').textContent = `Local time: ${n.getFullYear()}-${pad2(n.getMonth()+1)}-${pad2(n.getDate())} ${pad2(n.getHours())}:${pad2(n.getMinutes())}:${pad2(n.getSeconds())}`;
      }, 1000);
    </script>
  </body>
</html>
